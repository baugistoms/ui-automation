---
format_version: 10
pipelines:
  node-microservice:
    group: microservices
    materials:
      gitrepo:
        git: https://github.com/baugistoms/ci_course.git
        branch: main
    stages:
      - build-ubuntu-jdk-mvn:
          jobs:
            build:
              tasks:
               - exec:
                    command: bash
                    arguments:
                      - -c
                      - docker build -t ubuntu-jdk-mvn . -f Dockerfile
      - build-mvn-tests:
          jobs:
            build:
              tasks:
               - exec:
                    command: bash
                    arguments:
                      - -c
                      - docker build -t baugist/mvn_tests:latest . -f Dockerfile_tests
               - exec:
                    command: bash
                    arguments:
                      - -c
                      - docker push baugist/mvn_tests:latest